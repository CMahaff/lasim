import { Button, VerticalBox, HorizontalBox,
 TabWidget, LineEdit, ScrollView, TextEdit } from "std-widgets.slint";

export global ControlPageHandler {
    callback clicked(string);
}

export component ControlPage inherits VerticalBox {
    in-out property <string> type;
    out property <string> instance_url: instance_url_object.text;
    out property <string> username_input: username_input_object.text;
    out property <string> password_input: password_input_object.text;
    out property <string> two_factor_input: two_factor_input_object.text;
    in property <string> log_output;
    in property <bool> ui_enabled: true;

    alignment: start;

    instance_url_object := LineEdit {
        placeholder-text: "Instance URL";
        width: 250px;
        enabled: ui_enabled;
    }
    username_input_object := LineEdit {
        placeholder-text: "Username/Email";
        width: 250px;
        enabled: ui_enabled;
    }
    password_input_object := LineEdit {
        placeholder-text: "Password";
        input-type: password;
        width: 250px;
        enabled: ui_enabled;
    }
    two_factor_input_object := LineEdit {
        placeholder-text: "2FA Token (if enabled)";
        width: 250px;
        enabled: ui_enabled;
    }

    HorizontalLayout {
        alignment: start;
        VerticalLayout {
        width: 250px;
            HorizontalBox {
                alignment: center;
                Button {
                    text: type;
                    width: 120px;
                    enabled: ui_enabled;
                    clicked => {
                        ControlPageHandler.clicked(type);
                    }
                }
            }
            ScrollView {
                width: 250px;
                height: 170px;
                viewport-height: 4000px;
                viewport-width: 200px;
                TextEdit {
                    wrap: word-wrap;
                    read-only: true;
                    width: 250px;
                    x: 0;
                    y:0;
                    horizontal-alignment: left;
                    text: log_output;
                }
            }
        }
    }
}
